<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Daily Report</title>
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<link rel="stylesheet" href="styles.css" />
		<!-- EmailJS SDK -->
		<script
			type="text/javascript"
			src="https://cdn.emailjs.com/dist/email.min.js"
		></script>
		<script
			type="text/javascript"
			src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
		></script>
		<script type="text/javascript">
			(function () {
				emailjs.init({
					publicKey: "DQVGu9QX-hOFSAHha",
				});
			})();
		</script>
	</head>
	<body>
		<div class="container">
			<h1>Daily Report Form</h1>
			<form id="report-form">
				<!-- AM Shift -->
				<fieldset>
					<legend>AM Shift</legend>
					<label for="am-mod">MOD (AM):</label><br />
					<select id="am-mod" name="am-mod" required>
						<option value="Jake Z">Jake Z</option>
						<option value="Vannessa B">Vannessa B</option>
						<option value="Helen S">Helen S</option>
						<option value="Hannah C">Hannah C</option>
					</select>
					<br /><br />

					<label for="am-photo"
						>Photobooth (AM): <span style="color: red">*</span></label
					><br />
					<input
						type="file"
						id="am-photo"
						name="am-photo"
						accept="image/*"
						onchange="displayImage(event, 'am-image')"
					/>
					<br /><br />
					<img
						id="am-image"
						src=""
						alt="Uploaded AM photo"
						style="max-width: 100%; height: auto; display: none"
					/>

					<label for="am-general"
						>General Info (AM): <span style="color: red">*</span></label
					>
					<textarea
						id="am-general"
						name="am-general"
						rows="4"
						required
					></textarea>

					<label for="am-customer">Customer Info (AM):</label>
					<textarea id="am-customer" name="am-customer" rows="4"></textarea>

					<label for="am-maintenance">Maintenance Info (AM):</label>
					<textarea
						id="am-maintenance"
						name="am-maintenance"
						rows="4"
					></textarea>

					<label for="am-shoutouts">Shout Outs (AM):</label>
					<textarea id="am-shoutouts" name="am-shoutouts" rows="4"></textarea>
				</fieldset>

				<!-- MID Shift -->
				<fieldset>
					<legend>MID Shift</legend>
					<label for="mid-mod">MOD (MID):</label><br />
					<select id="mid-mod" name="mid-mod" required>
						<option value="Jake Z">Jake Z</option>
						<option value="Vannessa B">Vannessa B</option>
						<option value="Helen S">Helen S</option>
						<option value="Hannah C">Hannah C</option>
					</select>
					<br /><br />

					<label for="mid-photo"
						>Photobooth (MID): <span style="color: red">*</span></label
					>
					<br />
					<input
						type="file"
						id="mid-photo"
						name="mid-photo"
						accept="image/*"
						onchange="displayImage(event, 'mid-image')"
					/>
					<br /><br />
					<img
						id="mid-image"
						src=""
						alt="Uploaded MID photo"
						style="max-width: 100%; height: auto; display: none"
					/>

					<label for="mid-general"
						>General Info (MID): <span style="color: red">*</span></label
					>
					<textarea
						id="mid-general"
						name="mid-general"
						rows="4"
						required
					></textarea>

					<label for="mid-customer">Customer Info (MID):</label>
					<textarea id="mid-customer" name="mid-customer" rows="4"></textarea>

					<label for="mid-maintenance">Maintenance Info (MID):</label>
					<textarea
						id="mid-maintenance"
						name="mid-maintenance"
						rows="4"
					></textarea>

					<label for="mid-shoutouts">Shout Outs (MID):</label>
					<textarea id="mid-shoutouts" name="mid-shoutouts" rows="4"></textarea>
				</fieldset>

				<!-- PM Shift -->
				<fieldset>
					<legend>PM Shift</legend>
					<label for="pm-mod">MOD (PM):</label><br />
					<select id="pm-mod" name="pm-mod" required>
						<option value="Jake Z">Jake Z</option>
						<option value="Vannessa B">Vannessa B</option>
						<option value="Helen S">Helen S</option>
						<option value="Hannah C">Hannah C</option>
					</select>
					<br /><br />

					<label for="pm-photo"
						>Photobooth (PM): <span style="color: red">*</span></label
					>
					<br />
					<input
						type="file"
						id="pm-photo"
						name="pm-photo"
						accept="image/*"
						onchange="displayImage(event, 'pm-image')"
					/>
					<br /><br />
					<img
						id="pm-image"
						src=""
						alt="Uploaded PM photo"
						style="max-width: 100%; height: auto; display: none"
					/>

					<label for="pm-general"
						>General Info (PM): <span style="color: red">*</span></label
					>
					<textarea
						id="pm-general"
						name="pm-general"
						rows="4"
						required
					></textarea>

					<label for="pm-customer">Customer Info (PM):</label>
					<textarea id="pm-customer" name="pm-customer" rows="4"></textarea>

					<label for="pm-maintenance">Maintenance Info (PM):</label>
					<textarea
						id="pm-maintenance"
						name="pm-maintenance"
						rows="4"
					></textarea>

					<label for="pm-shoutouts">Shout Outs (PM):</label>
					<textarea id="pm-shoutouts" name="pm-shoutouts" rows="4"></textarea>

					<label for="pm-shoutouts">Notes for opener:</label>
					<textarea id="open-notes" name="open-notes" rows="4"></textarea>
				</fieldset>

				<button type="submit">Submit Report</button>
			</form>
		</div>

		<script src="scripts.js"></script>
		<script>
			function displayImage(event, imageId) {
				const file = event.target.files[0];

				// Create an image object to process the file
				const img = new Image();

				const reader = new FileReader();
				reader.onload = function (e) {
					// Set the source of the image to the file's data URL
					img.src = e.target.result;
				};

				// Once the image is loaded, resize it and convert to base64
				img.onload = function () {
					const canvas = document.createElement("canvas");
					const ctx = canvas.getContext("2d");

					// Resize the image (example: max width of 800px)
					const MAX_WIDTH = 800;
					const scaleFactor = MAX_WIDTH / img.width;
					canvas.width = MAX_WIDTH;
					canvas.height = img.height * scaleFactor;

					// Draw the image to the canvas
					ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

					// Convert the resized image to base64
					const base64Image = canvas.toDataURL(file.type);

					// Show the resized image in the HTML
					const imageElement = document.getElementById(imageId);
					imageElement.src = base64Image;
					imageElement.style.display = "block";

					// Store the base64 image in the input's dataset for later submission
					const inputName = event.target.name;
					document.getElementById(inputName).dataset.base64 = base64Image;
				};

				if (file) {
					reader.readAsDataURL(file);
				}
			}
		</script>
	</body>
</html>
